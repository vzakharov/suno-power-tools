(()=>{function i(n,e){Object.assign(n,e)}function f(n){return b(n)}var m=Symbol("ref");function b(n){let e=new T(n);function r(t){if(t===void 0)return e.get();e.set(t)}return i(e,r),i(e,{[m]:!0}),e}var c=class{constructor(e){this._value=e}watchers=[];get(){return d.at(-1)?.(this),this._value}_set(e){let{_value:r}=this;e!==this._value&&(this._value=e,this.watchers.forEach(t=>t(e,r)))}runAndWatch(e){e(this._value,this._value),this.watch(e)}watchImmediate=this.runAndWatch;watch(e){this.watchers.push(e)}onChange=this.watch;unwatch(e){this.watchers=this.watchers.filter(r=>r!==e)}get value(){return this.get()}},T=class extends c{set=super._set;set value(e){this.set(e)}get value(){return this.get()}},d=[],p=class extends c{constructor(r){super(void 0);this.getter=r;let t=u=>{u.watch(()=>this.refresh())};if(d.push(t),this.refresh(),d.pop()!==t)throw new Error("smork: computedPreHandlers stack is corrupted")}refresh(){this._set(this.getter())}};function l(n){let e=new p(n);return i(e,()=>e.get()),i(e,{[m]:!0}),e}function x(n){return l(()=>!n.value)}var P=["html","head","style","script","body","div","h3","p","a","img","audio","input","label","button"],{html:K,head:V,style:_,script:k,body:A,div:I,h3:N,p:B,a:D,img:F,audio:M,input:y,label:W,button:C}=w(P);function w(n){return n.reduce((e,r)=>Object.assign(e,{[r]:v(r)}),{})}function v(n){function e(t,u){let[o,s]=Array.isArray(t)?[void 0,t]:[t,u];return r(o,s)}function r(t,u){let o=document.createElement(n);if(t){let s=function(a){Object.assign(o,a),a.class&&(o.className=a.class),o instanceof HTMLLabelElement&&a.for&&(o.htmlFor=a.for),Object.entries(a.style??{}).forEach(([g,E])=>{o.style[g]=E})};typeof t=="function"?l(t).runAndWatch(s):s(t)}return u&&u.forEach(s=>{typeof s=="string"?o.appendChild(document.createTextNode(s)):o.appendChild(s)}),o}return e}var L=h(y,{type:"checkbox"}),H=h(y,{type:"text"});function h(n,e){return(...r)=>{let t=n(...r);return Object.assign(t,e),t}}i(window,{ref:f,computed:l,useNot:x,BaseClassRef:c,ClassRef:T,ComputedClassRef:p});})();

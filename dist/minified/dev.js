(()=>{function d(n){return new u(n)}var i=class{constructor(e){this._value=e}watchers=[];activeWatchers=new WeakSet;get(){return p?.(this),this._value}_set(e){let{_value:r}=this;if(e!==this._value){this._value=e;try{for(let t of this.watchers){if(this.activeWatchers.has(t)){console.warn("smork: watcher is already active \u2014 perhaps a circular dependency \u2014 exiting watch to prevent infinite loop");return}this.activeWatchers.add(t),t(e,r)}}finally{this.activeWatchers=new WeakSet}}}runAndWatch(e){e(this._value,this._value),this.watch(e)}watchImmediate=this.runAndWatch;watch(e){this.watchers.push(e)}onChange=this.watch;unwatch(e){this.watchers=this.watchers.filter(r=>r!==e)}get value(){return this.get()}},u=class extends i{set=super._set;set value(e){this.set(e)}get value(){return this.get()}},p,c=class extends i{constructor(r){var e=(...V)=>(super(...V),this.getter=r,this);if(p)throw new Error("smork: currentComputedPreHandler is already set (this should never happen)");try{p=t=>{t.watch(()=>this.refresh())},e(r())}finally{p=void 0}}refresh(){this._set(this.getter())}};function T(n){return new c(n)}function f(n){return T(()=>!n.value)}var g=["html","head","style","script","body","div","h3","p","a","img","audio","input","label","button"],{html:W,head:k,style:U,script:_,body:O,div:j,h3:A,p:I,a:B,img:D,audio:R,input:m,label:F,button:M}=P(g);function P(n){return n.reduce((e,r)=>Object.assign(e,{[r]:w(r)}),{})}function w(n){function e(t,l){let[o,s]=Array.isArray(t)?[void 0,t]:[t,l];return r(o,s)}function r(t,l){let o=document.createElement(n);if(t){let s=function(a){Object.assign(o,a),a.class&&(o.className=a.class),o instanceof HTMLLabelElement&&a.for&&(o.htmlFor=a.for),Object.entries(a.style??{}).forEach(([y,E])=>{o.style[y]=E})};typeof t=="function"?T(t).runAndWatch(s):s(t)}return l&&l.forEach(s=>{typeof s=="string"?o.appendChild(document.createTextNode(s)):o.appendChild(s)}),o}return e}var N=h(m,{type:"checkbox"}),K=h(m,{type:"text"});function h(n,e){return(...r)=>{let t=n(...r);return Object.assign(t,e),t}}function x(n,e){Object.assign(n,e)}x(window,{ref:d,computed:T,useNot:f,BaseRef:i,Ref:u,ComputedRef:c});})();

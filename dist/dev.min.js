(vovas = { main() {
(()=>{var me=Object.defineProperty;var ye=(t,e)=>{for(var n in e)me(t,n,{get:e[n],enumerable:!0})};var X={};function y(t=""){return X[t]??=0,`${t}${++X[t]}`}function N(t,e){return Object.fromEntries(Object.entries(t).map(([n,o])=>[n,e(o,n)]))}function Q(t,e){return N(t,e)}function R(t){return typeof t=="function"}function Y(t){return t}function Z(t,e){return Object.assign(t,e)}function B(t){return Object.values(t)}function M(t,e){return e(t)}function h(t,e){Object.assign(t,e)}function ee(t,e){return h(t,e),t}function te(t){throw new Error(t)}function b(t,e,n){let o=t.get(e);return o!==void 0?o:(t.set(e,n),n)}var j={};ye(j,{$import:()=>_,$object:()=>St,$var:()=>yn,Checkbox:()=>bn,If:()=>C,Labeled:()=>vn,TextInput:()=>xn,a:()=>he,abbr:()=>be,address:()=>xe,area:()=>ve,article:()=>Re,aside:()=>we,audio:()=>ke,b:()=>Ae,base:()=>Ee,bdi:()=>Ke,bdo:()=>Se,blockquote:()=>Ue,body:()=>Ne,br:()=>Me,button:()=>F,canvas:()=>Ie,caption:()=>Fe,cite:()=>Pe,code:()=>Oe,col:()=>We,colgroup:()=>$e,data:()=>De,datalist:()=>Be,dd:()=>Le,del:()=>_e,details:()=>Ce,dfn:()=>je,dialog:()=>He,div:()=>k,dl:()=>qe,dt:()=>ze,em:()=>Ve,embed:()=>Ge,fieldset:()=>Je,figcaption:()=>Xe,figure:()=>Qe,footer:()=>Ye,form:()=>Ze,h1:()=>et,h2:()=>tt,h3:()=>nt,h4:()=>rt,h5:()=>ot,h6:()=>at,head:()=>it,header:()=>st,hgroup:()=>lt,hr:()=>ut,html:()=>ct,i:()=>pt,iframe:()=>dt,img:()=>ft,input:()=>Tt,ins:()=>mt,kbd:()=>yt,label:()=>re,legend:()=>gt,li:()=>ht,link:()=>bt,main:()=>xt,map:()=>vt,mark:()=>Rt,menu:()=>wt,meta:()=>kt,meter:()=>At,nav:()=>Et,noscript:()=>Kt,ol:()=>Ut,optgroup:()=>Nt,option:()=>Mt,output:()=>It,p:()=>Ft,picture:()=>Pt,pre:()=>Ot,progress:()=>Wt,q:()=>$t,rp:()=>Dt,rt:()=>Bt,ruby:()=>Lt,s:()=>_t,samp:()=>Ct,script:()=>oe,search:()=>jt,section:()=>Ht,select:()=>qt,slot:()=>zt,small:()=>Vt,source:()=>Gt,span:()=>Jt,strong:()=>Xt,style:()=>Qt,sub:()=>Yt,summary:()=>Zt,sup:()=>en,table:()=>tn,tag:()=>I,tbody:()=>nn,td:()=>rn,template:()=>on,textarea:()=>an,tfoot:()=>sn,th:()=>ln,thead:()=>un,time:()=>cn,title:()=>pn,tr:()=>dn,track:()=>fn,u:()=>Tn,ul:()=>mn,video:()=>gn,wbr:()=>hn});var In=Symbol("brand");function L(t,e){return R(t)?t(e):t}var ne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function I(t){function e(o,c){let[s,l]=Array.isArray(o)?[void 0,o]:[o,c];return n(s,l)}return e;function n(o,c){let s=document.createElement(t);return x&&A.add(s),o&&Q(o,(l,p)=>{typeof l=="function"?s[p]=l:M(l,d=>{T(H(d)),ae(d).watch(T),x&&d instanceof u&&b(w,d,new Set).add(s);function T(f){typeof f=="boolean"?f?s.setAttribute(p,""):s.removeAttribute(p):s.setAttribute(p,String(f))}})}),c&&c.forEach(l=>{let p=void 0,d=T=>{let f=typeof T=="string"?document.createTextNode(T):T instanceof HTMLElement?T:document.createComment("");p?p.replaceWith(f):s.appendChild(f),p=f};l instanceof u?l.watchImmediate(d):d(l),x&&l instanceof u&&b(w,l,new Set).add(s)}),s}}var{a:he,abbr:be,address:xe,area:ve,article:Re,aside:we,audio:ke,b:Ae,base:Ee,bdi:Ke,bdo:Se,blockquote:Ue,body:Ne,br:Me,button:F,canvas:Ie,caption:Fe,cite:Pe,code:Oe,col:We,colgroup:$e,data:De,datalist:Be,dd:Le,del:_e,details:Ce,dfn:je,dialog:He,div:k,dl:qe,dt:ze,em:Ve,embed:Ge,fieldset:Je,figcaption:Xe,figure:Qe,footer:Ye,form:Ze,h1:et,h2:tt,h3:nt,h4:rt,h5:ot,h6:at,head:it,header:st,hgroup:lt,hr:ut,html:ct,i:pt,iframe:dt,img:ft,input:Tt,ins:mt,kbd:yt,label:re,legend:gt,li:ht,link:bt,main:xt,map:vt,mark:Rt,menu:wt,meta:kt,meter:At,nav:Et,noscript:Kt,object:St,ol:Ut,optgroup:Nt,option:Mt,output:It,p:Ft,picture:Pt,pre:Ot,progress:Wt,q:$t,rp:Dt,rt:Bt,ruby:Lt,s:_t,samp:Ct,script:oe,search:jt,section:Ht,select:qt,slot:zt,small:Vt,source:Gt,span:Jt,strong:Xt,style:Qt,sub:Yt,summary:Zt,sup:en,table:tn,tbody:nn,td:rn,template:on,textarea:an,tfoot:sn,th:ln,thead:un,time:cn,title:pn,tr:dn,track:fn,u:Tn,ul:mn,var:yn,video:gn,wbr:hn}=ne.reduce((t,e)=>(t[e]=I(e),t),{});function bn(t,e){return I("input")({...e,type:"checkbox",checked:t,onchange:()=>t.set(!t.value)})}function xn(t,e){return I("input")({...e,type:"text",value:t,onkeyup:({key:n,target:o})=>{n==="Enter"&&o instanceof HTMLInputElement&&t.set(o.value)}})}function vn(t,e){e.id||=y("smork-input-");let n=[re({for:e.id},[t]),e];return e.type==="checkbox"&&n.reverse(),n}async function _(t,e){return window[t]?window[t]:new Promise(n=>{document.head.appendChild(oe({src:e,onload:()=>n(window[t])}))})}function C(t,e,n=void 0){return t.map(o=>o?L(e,o):L(n))}var x=!0,P=new Set,A=new Set,w=new Map;async function Rn(){let t=await _("ForceGraph","https://unpkg.com/force-graph"),e,n,o=O(!1).named("minimized"),c=o.map(r=>r?"10":"70");document.body.appendChild(e=k({style:"position: fixed; top: 0; right: 0; z-index: 300; background: #eee; padding: 1em;"},[k({style:"position: relative;"},[n=k({style:c.map(r=>`height: ${r}vh; width: ${r}vw; overflow: auto`)}),F({style:"position: absolute; top: 0; left: 0; color: black",onclick:()=>e.remove()},["X"]),F({style:"position: absolute; top: 0; right: 0; color: black",onclick:()=>o.set(!o.value)},[C(o,"\u2199","\u2197")])])]));let s=[...P],l=s.map(r=>({id:r.id,ref:r,class:r.constructor.name,name:`${r.name??r.id} (${r.constructor.name}) = ${Array.isArray(r.value)?`${r.value.length} \u2715 ${r.value[0]?.constructor.name}`:r.value?.toString()}`,val:3})),p=l.map(({id:r,ref:{targets:i}})=>[...i].map(({id:a})=>({source:r,target:a}))).flat(),d=s.map(({watchers:r})=>[...r].map(i=>({id:y("watcher-"),watcher:i,class:"watcher",name:`${i.toString()}`}))).flat(),T=new Map(d.map(({watcher:r,id:i})=>[r,i])),f=s.map(({id:r,watchers:i})=>[...i].map(a=>({source:r,target:T.get(a)??te(`Watcher ${a} has no ID.`)})).flat()).flat();function V(r){return{id:y("el-"),element:r,class:r.constructor.name,name:`${r.tagName}#${r.id||""}.${r.className}`,val:r.querySelectorAll("*").length}}let S=[...A].map(V),ie=new Map,D=r=>{let i=(S.find(({element:a})=>a===r)??(()=>{let a=V(r);return S.push(a),a})()).id;return b(ie,r,i)},G=[...[...w].map(([{id:r},i])=>[...i].map(a=>({source:r,target:D(a)}))).flat(),...[...A].map(r=>[...r.children].filter(a=>a instanceof HTMLElement).map(a=>({source:D(r),target:D(a)}))).flat()],se=[...l,...S,...d],le=[...p,...G,...f],ue={nodes:se,links:le},ce=r=>"#"+(r*1234567%Math.pow(2,24)).toString(16).padStart(6,"0"),pe=0,de=new Map,fe=r=>ce(b(de,r,++pe));new t(n).graphData(ue).onNodeClick(({ref:r,element:i,watcher:a})=>{console.log(...r?[r._value,r]:[i??a]),h(window,{$:r??i??a})}).nodeAutoColorBy("class").nodeCanvasObjectMode(({ref:r,element:i})=>r?"after":i&&"replace").nodeCanvasObject(({ref:r,element:i,x:a,y:U,val:Te},m)=>{r?.name&&a&&U&&(m.font="10px Arial",m.fillText(r.name,a+10,U)),i&&a&&U&&(m.beginPath(),m.arc(a,U,Math.sqrt(Number(Te)+1),0,2*Math.PI,!1),m.fillStyle="white",m.fill(),m.lineWidth=2,m.strokeStyle=fe(i.tagName),m.stroke())}).linkLineDash(({target:r})=>typeof r=="object"&&r.element?[4,2]:null).linkDirectionalParticles(1);let J={refNodes:l,elementNodes:S,refLinks:p,watcherLinks:f,elementLinks:G};h(window.smork,J),console.log(J)}Object.assign(window,{smork:{devTools:Rn,allRefs:P,allElements:A,refToElementLinks:w}});var $=class extends Error{constructor(e){super(`smork: ${e}`)}};function wn(t){return t&&typeof t=="object"&&B(t).every(e=>e instanceof u)}function O(t,e){return R(t)?z(t,e):wn(t)?new g(()=>N(t,H),B(t)):new v(t)}var kn=Symbol("NotApplicable"),u=class{constructor(e){this._value=e;x&&P.add(this)}watchers=new Set;activeWatchers=new WeakSet;targets=new Set;id=y("ref-");name=void 0;named(e){return ee(this,{name:e})}get(){return W?.(this),this._value}_set(e){let{_value:n}=this;if(e!==n){this._value=e,this.tarnishTargets();try{for(let o of this.watchers)this.activeWatchers.has(o)&&console.warn("smork: watcher is already active \u2014 perhaps a circular dependency \u2014 exiting watch to prevent infinite loop"),this.activeWatchers.add(o),o(e,n)}finally{this.activeWatchers=new WeakSet}}}tarnishTargets(){this.targets.forEach(e=>e.tarnish())}watchImmediate(e){e(this.value,kn),this.watch(e)}watch(e){this.watchers.add(e)}unwatch(e){this.watchers.delete(e)}get value(){return this.get()}map(e){let n=new E(this,e);return R(n.value)?(this.targets.delete(n),n.sources.clear(),(...o)=>new E(this,c=>e(c)(...o))):n}mapDefined(e){return this.map(n=>n!==void 0?e(n):void 0)}uses(e){return Z(this,N(e,this.map))}setter(e=n=>this._set(n)){return new K(this,e)}},W,g=class extends u{constructor(n,o=void 0){super(void 0);this.getter=n;this.sources=new Set(o),(this.sourcesPredefined=!!o)&&o.forEach(c=>c.targets.add(this))}sources;sourcesPredefined=!1;dirty=!0;tarnish(){this.dirty||(this.dirty=!0,this.watchers.size?this.recalculate():this.tarnishTargets())}get(){return this.dirty&&this.recalculate(),super.get()}recalculate(){if(this.sourcesPredefined)return this.update();if(W)throw new $("Tried to compute a ref while another one is already being computed \u2014 did you nest a computed ref in another ref's getter function?");this.sources.forEach(n=>n.targets.delete(this)),this.sources.clear();try{W=n=>{this.sources.add(n),n.targets.add(this)},this.update()}finally{W=void 0}}update=()=>{this._set(this.getter()),this.dirty=!1}};function z(t,e){return M(new g(t),n=>e?n.setter(e):n)}var E=class extends g{constructor(n,o){super(()=>o(n.value),[n]);this.source=n}},v=class extends u{set(e){this._set(e)}set value(e){this.set(e)}get value(){return this.get()}bridge(e,n){return this.map(e).setter(o=>this.set(n(o)))}clone(){return new q(this)}},q=class extends E{constructor(n){super(n,Y);this.source=n}},K=class extends v{constructor(n,o,c=!1){super(n.value);this.source=n;this.allowMismatch=c;super.watch(An(this))}set(n){if(super.set(n),!this.allowMismatch&&this.value!==n)throw new $("Setter did not update the value. If you want to allow this, set the allowMismatch property to true.")}};function An(t){return e=>{t.set(e)}}function H(t){return t instanceof u?t.value:t}function ae(t){return t instanceof u?t:new u(t)}h(window,{ref:O,computed:z,Ref:u,WritableRef:v,ComputedRef:g,SetterRef:K,...j});})();
}}).main();

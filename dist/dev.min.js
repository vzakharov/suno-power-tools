(vovas = { main() {
(()=>{var C=Object.defineProperty;var V=(t,e)=>{for(var n in e)C(t,n,{get:e[n],enumerable:!0})};var D=0;function S(t=""){return`${t}${++D}`}function g(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,e(r,n)]))}function R(t,e){return g(t,e)}function w(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[e(n,r),r]))}function b(t){return typeof t=="function"}function K(t,e){return Object.assign(t,e)}var y=class extends Error{constructor(e){super(`smork: ${e}`)}};function N(t,e){return b(t)?m(t,e):new T(t)}var i=class{constructor(e){this._value=e}watchers=new Set;activeWatchers=new WeakSet;get(){return x?.(this),this._value}_set(e){let{_value:n}=this;if(e!==this._value){this._value=e;try{for(let r of this.watchers){if(this.activeWatchers.has(r)){console.warn("smork: watcher is already active \u2014 perhaps a circular dependency \u2014 exiting watch to prevent infinite loop");return}this.activeWatchers.add(r),r(e,n)}}finally{this.activeWatchers=new WeakSet}}}runAndWatch(e){e(this._value,this._value),this.watch(e)}watchImmediate=this.runAndWatch;watch(e){this.watchers.add(e)}onChange=this.watch;unwatch(e){this.watchers.delete(e)}get value(){return this.get()}map(e){let n=new h(this,e);return b(n.value)?(this.unwatch(n.update),(...r)=>new h(this,o=>e(o)(...r))):n}merge(e){return e?m(()=>({...this.value,...j(e)})):this}uses(e){return K(this,g(e,this.map))}onceDefined(e){let n=r=>{r&&(this.unwatch(n),e(r))};this.watchImmediate(n)}},h=class extends i{constructor(n,r){var e=(...pe)=>(super(...pe),this.dependency=n,this.mapper=r,this);n&&(e(r(n.value)),n.watch(this.update))}update=n=>this._set(this.mapper(n))},T=class extends i{set(e){this._set(e)}set value(e){this.set(e)}get value(){return this.get()}bridge(e,n){return new p(()=>e(this.value),r=>this.set(n(r)))}};var x,d=class extends T{constructor(n){super(void 0);this.getter=n;this.track()}dependencies=new Set;track=()=>{if(x)throw new y("Tried to compute a ref while another one is already being computed \u2014 did you nest a computed ref in another ref's getter function?");this.dependencies.forEach(n=>n.unwatch(this.track)),this.dependencies=new Set;try{x=n=>{n.watch(this.track),this.dependencies.add(n)},this._set(this.getter())}finally{x=void 0}}},p=class extends T{constructor(n,r,o=!1){let a=new d(n);super(a.value);this.setter=r;this.allowMismatch=o;a.watch(s=>this._set(s))}set(n){if(this.setter(n),!this.allowMismatch&&this.value!==n)throw new y("Setter did not update the value. If you want to allow this, set the allowMismatch property to true.")}};function m(t,e){return e?new p(t,e):new d(t)}function U(t){return m(()=>!t.value)}function k(t){return(e,n)=>t instanceof i?e(t):n(t)}function j(t){return k(t)(e=>e.value,e=>e)}function M(t,e){k(t)(n=>n.watchImmediate(e),e)}function P(t,e){Object.assign(t,e)}function W(t,e){return w(t,n=>e[n]??n)}var E={};V(E,{Checkbox:()=>te,If:()=>ae,Labeled:()=>re,SUPPORTED_TAGS:()=>I,TextInput:()=>ne,a:()=>z,audio:()=>X,body:()=>q,button:()=>ee,createTags:()=>O,div:()=>G,h3:()=>B,head:()=>L,html:()=>H,img:()=>Q,importScript:()=>oe,input:()=>Z,label:()=>A,modelElement:()=>v,p:()=>J,script:()=>$,style:()=>Y,tags:()=>F});var I=["html","head","style","script","body","div","h3","p","a","img","audio","input","label","button"],F=O(I),{html:H,head:L,style:Y,script:$,body:q,div:G,h3:B,p:J,a:z,img:Q,audio:X,input:Z,label:A,button:ee}=F;function O(t){return t.reduce((e,n)=>Object.assign(e,{[n]:_(n)}),{})}function _(t){function e(r,o){let[a,s]=Array.isArray(r)?[void 0,r]:[r,o];return n(a,s)}return e;function n(r,o){let a=document.createElement(t);return r&&R(W(r,{class:"className",for:"htmlFor"}),(s,u)=>{M(s,c=>{u!=="style"?a[u]=c:R(c,(l,f)=>a.style[f]=l)})}),o&&o.forEach(s=>{let u=void 0,c=l=>{let f=typeof l=="string"?document.createTextNode(l):l instanceof HTMLElement?l:document.createComment("");u?u.replaceWith(f):a.appendChild(f),u=f};s instanceof i?s.watchImmediate(c):c(s)}),a}}var te=v("input","checked",{type:"checkbox"},t=>({onchange:()=>t.set(!t.value)})),ne=v("input","value",{type:"text"},t=>({onkeyup:({key:e,target:n})=>{e==="Enter"&&n instanceof HTMLInputElement&&t.set(n.value)}}));function v(t,e,n,r){return(o,a)=>_(t)({...n,...a,[e]:o,...r(o)})}function re(t,e){e.id||=S("smork-input-");let n=[A({for:e.id},[t]),e];return e.type==="checkbox"&&n.reverse(),n}async function oe(t,e,n){let r=t.document.createElement("script");return r.type="text/javascript",r.src=n,t.document.head.appendChild(r),new Promise(o=>{r.onload=()=>{o(t[e])}})}function ae(t,e,n=void 0){return t.map(r=>r?e:n)}P(window,{ref:N,computed:m,useNot:U,Ref:i,WritableRef:T,ComputedRef:d,WritableComputedRef:p,...E});})();
}}).main();

(vovas = { main() {
(()=>{var I=Object.defineProperty;var q=(t,e)=>{for(var o in e)I(t,o,{get:e[o],enumerable:!0})};var A=0;function E(t=""){return`${t}${++A}`}function h(t,e){return Object.fromEntries(Object.entries(t).map(([o,r])=>[o,e(r,o)]))}function F(t,e){return h(t,e)}function R(t){return typeof t=="function"}function P(t,e){return Object.assign(t,e)}var x=class extends Error{constructor(e){super(`smork: ${e}`)}};function v(t,e){return R(t)?T(t,e):new c(t)}var i=class{constructor(e){this._value=e}watchers=new Set;activeWatchers=new WeakSet;get(){return y?.(this),this._value}_set(e){let{_value:o}=this;if(e!==this._value){this._value=e;try{for(let r of this.watchers){if(this.activeWatchers.has(r)){console.warn("smork: watcher is already active \u2014 perhaps a circular dependency \u2014 exiting watch to prevent infinite loop");return}this.activeWatchers.add(r),r(e,o)}}finally{this.activeWatchers=new WeakSet}}}runAndWatch(e){e(this._value,this._value),this.watch(e)}watchImmediate=this.runAndWatch;watch(e){this.watchers.add(e)}onChange=this.watch;unwatch(e){this.watchers.delete(e)}get value(){return this.get()}map(e){let o=new b(this,e);return R(o.value)?(this.unwatch(o.update),(...r)=>new b(this,p=>e(p)(...r))):o}merge(e){return e?T(()=>({...this.value,...g(e)})):this}uses(e){return P(this,h(e,this.map))}onceDefined(e){let o=r=>{r&&(this.unwatch(o),e(r))};this.watchImmediate(o)}},b=class extends i{constructor(o,r){var e=(...J)=>(super(...J),this.dependency=o,this.mapper=r,this);o&&(e(r(o.value)),o.watch(this.update))}update=o=>this._set(this.mapper(o))},c=class extends i{set(e){this._set(e)}set value(e){this.set(e)}get value(){return this.get()}bridge(e,o){return new s(()=>e(this.value),r=>this.set(o(r)))}};var y,d=class extends c{constructor(o){super(void 0);this.getter=o;this.track()}dependencies=new Set;track=()=>{if(y)throw new x("Tried to compute a ref while another one is already being computed \u2014 did you nest a computed ref in another ref's getter function?");this.dependencies.forEach(o=>o.unwatch(this.track)),this.dependencies=new Set;try{y=o=>{o.watch(this.track),this.dependencies.add(o)},this._set(this.getter())}finally{y=void 0}}},s=class extends c{constructor(o,r,p=!1){let n=new d(o);super(n.value);this.setter=r;this.allowMismatch=p;n.watch(a=>this._set(a))}set(o){if(this.setter(o),!this.allowMismatch&&this.value!==o)throw new x("Setter did not update the value. If you want to allow this, set the allowMismatch property to true.")}};function T(t,e){return e?new s(t,e):new d(t)}function w(t){return T(()=>!t.value)}function g(t){return t instanceof i?t.value:t}function U(t){return t instanceof i?t:new i(t)}function K(t,e){return e(t)}function M(t,e){Object.assign(t,e)}var S={};q(S,{Checkbox:()=>j,If:()=>_,Labeled:()=>$,TextInput:()=>V,importScript:()=>C,modelElement:()=>N,tag:()=>k});function W(...t){return k("label")(...t)}function k(t){function e(r,p){let[n,a]=Array.isArray(r)?[void 0,r]:[r,p];return o(n,a)}return e;function o(r,p){let n=document.createElement(t);return r&&F(r,(a,l)=>{typeof a=="function"?n[l==="style"?"cssText":l]=a():K(a,m=>{u(g(m)),U(m).watch(u);function u(f){typeof f=="boolean"?f?n.setAttribute(l,""):n.removeAttribute(l):n.setAttribute(l,String(f))}})}),p&&p.forEach(a=>{let l=void 0,m=u=>{let f=typeof u=="string"?document.createTextNode(u):u instanceof HTMLElement?u:document.createComment("");l?l.replaceWith(f):n.appendChild(f),l=f};a instanceof i?a.watchImmediate(m):m(a)}),n}}var j=N("input","checked",Boolean,{type:"checkbox"},t=>({onchange:()=>t.set(!t.value)})),V=N("input","value",String,{type:"text"},t=>({onkeyup:({key:e,target:o})=>{e==="Enter"&&o instanceof HTMLInputElement&&t.set(o.value)}}));function N(t,e,o,r){return(p,n)=>t(t)({...o,...n,[e]:p,...r(p)})}function $(t,e){e.id||=E("smork-input-");let o=[W({for:e.id},[t]),e];return e.type==="checkbox"&&o.reverse(),o}async function C(t,e,o){let r=t.document.createElement("script");return r.type="text/javascript",r.src=o,t.document.head.appendChild(r),new Promise(p=>{r.onload=()=>{p(t[e])}})}function _(t,e,o=void 0){return t.map(r=>r?e:o)}M(window,{ref:v,computed:T,useNot:w,Ref:i,WritableRef:c,ComputedRef:d,WritableComputedRef:s,...S});})();
}}).main();

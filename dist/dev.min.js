(vovas = { main() {
(()=>{var Te=Object.defineProperty;var me=(t,e)=>{for(var n in e)Te(t,n,{get:e[n],enumerable:!0})};var G={};function g(t=""){return G[t]??=0,`${t}${++G[t]}`}function U(t,e){return Object.fromEntries(Object.entries(t).map(([n,o])=>[n,e(o,n)]))}function J(t,e){return U(t,e)}function L(t){return typeof t=="function"}function X(t){return t}function Q(t,e){return Object.assign(t,e)}function O(t){return Object.values(t)}function K(t,e){return e(t)}function h(t,e){Object.assign(t,e)}function Z(t,e){return h(t,e),t}function ee(t){throw new Error(t)}function b(t,e,n){let o=t.get(e);return o!==void 0?o:(t.set(e,n),n)}var j={};me(j,{$import:()=>C,$object:()=>St,$var:()=>mn,Checkbox:()=>hn,If:()=>_,Labeled:()=>xn,TextInput:()=>bn,a:()=>ye,abbr:()=>he,address:()=>be,area:()=>xe,article:()=>ve,aside:()=>Re,audio:()=>we,b:()=>ke,base:()=>Ne,bdi:()=>Ee,bdo:()=>Se,blockquote:()=>Ae,body:()=>Ue,br:()=>Ke,button:()=>F,canvas:()=>Me,caption:()=>Fe,cite:()=>Ie,code:()=>Pe,col:()=>$e,colgroup:()=>We,data:()=>De,datalist:()=>Le,dd:()=>Oe,del:()=>Ce,details:()=>_e,dfn:()=>je,dialog:()=>He,div:()=>w,dl:()=>Ve,dt:()=>qe,em:()=>ze,embed:()=>Be,fieldset:()=>Ye,figcaption:()=>Ge,figure:()=>Je,footer:()=>Xe,form:()=>Qe,h1:()=>Ze,h2:()=>et,h3:()=>tt,h4:()=>nt,h5:()=>rt,h6:()=>ot,head:()=>at,header:()=>it,hgroup:()=>st,hr:()=>lt,html:()=>ut,i:()=>ct,iframe:()=>dt,img:()=>pt,input:()=>ft,ins:()=>Tt,kbd:()=>mt,label:()=>ne,legend:()=>gt,li:()=>yt,link:()=>ht,main:()=>bt,map:()=>xt,mark:()=>vt,menu:()=>Rt,meta:()=>wt,meter:()=>kt,nav:()=>Nt,noscript:()=>Et,ol:()=>At,optgroup:()=>Ut,option:()=>Kt,output:()=>Mt,p:()=>Ft,picture:()=>It,pre:()=>Pt,progress:()=>$t,q:()=>Wt,rp:()=>Dt,rt:()=>Lt,ruby:()=>Ot,s:()=>Ct,samp:()=>_t,script:()=>re,search:()=>jt,section:()=>Ht,select:()=>Vt,slot:()=>qt,small:()=>zt,source:()=>Bt,span:()=>Yt,strong:()=>Gt,style:()=>Jt,sub:()=>Xt,summary:()=>Qt,sup:()=>Zt,table:()=>en,tag:()=>M,tbody:()=>tn,td:()=>nn,template:()=>rn,textarea:()=>on,tfoot:()=>an,th:()=>sn,thead:()=>ln,time:()=>un,title:()=>cn,tr:()=>dn,track:()=>pn,u:()=>fn,ul:()=>Tn,video:()=>gn,wbr:()=>yn});var te=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function M(t){function e(o,c){let[s,l]=Array.isArray(o)?[void 0,o]:[o,c];return n(s,l)}return e;function n(o,c){let s=document.createElement(t);return x&&k.add(s),o&&J(o,(l,d)=>{typeof l=="function"?s[d]=l:K(l,p=>{T(H(p)),oe(p).watch(T),x&&p instanceof u&&b(R,p,new Set).add(s);function T(f){typeof f=="boolean"?f?s.setAttribute(d,""):s.removeAttribute(d):s.setAttribute(d,String(f))}})}),c&&c.forEach(l=>{let d=void 0,p=T=>{let f=typeof T=="string"?document.createTextNode(T):T instanceof HTMLElement?T:document.createComment("");d?d.replaceWith(f):s.appendChild(f),d=f};l instanceof u?l.watchImmediate(p):p(l),x&&l instanceof u&&b(R,l,new Set).add(s)}),s}}var{a:ye,abbr:he,address:be,area:xe,article:ve,aside:Re,audio:we,b:ke,base:Ne,bdi:Ee,bdo:Se,blockquote:Ae,body:Ue,br:Ke,button:F,canvas:Me,caption:Fe,cite:Ie,code:Pe,col:$e,colgroup:We,data:De,datalist:Le,dd:Oe,del:Ce,details:_e,dfn:je,dialog:He,div:w,dl:Ve,dt:qe,em:ze,embed:Be,fieldset:Ye,figcaption:Ge,figure:Je,footer:Xe,form:Qe,h1:Ze,h2:et,h3:tt,h4:nt,h5:rt,h6:ot,head:at,header:it,hgroup:st,hr:lt,html:ut,i:ct,iframe:dt,img:pt,input:ft,ins:Tt,kbd:mt,label:ne,legend:gt,li:yt,link:ht,main:bt,map:xt,mark:vt,menu:Rt,meta:wt,meter:kt,nav:Nt,noscript:Et,object:St,ol:At,optgroup:Ut,option:Kt,output:Mt,p:Ft,picture:It,pre:Pt,progress:$t,q:Wt,rp:Dt,rt:Lt,ruby:Ot,s:Ct,samp:_t,script:re,search:jt,section:Ht,select:Vt,slot:qt,small:zt,source:Bt,span:Yt,strong:Gt,style:Jt,sub:Xt,summary:Qt,sup:Zt,table:en,tbody:tn,td:nn,template:rn,textarea:on,tfoot:an,th:sn,thead:ln,time:un,title:cn,tr:dn,track:pn,u:fn,ul:Tn,var:mn,video:gn,wbr:yn}=te.reduce((t,e)=>(t[e]=M(e),t),{});function hn(t,e){return M("input")({...e,type:"checkbox",checked:t,onchange:()=>t.set(!t.value)})}function bn(t,e){return M("input")({...e,type:"text",value:t,onkeyup:({key:n,target:o})=>{n==="Enter"&&o instanceof HTMLInputElement&&t.set(o.value)}})}function xn(t,e){e.id||=g("smork-input-");let n=[ne({for:e.id},[t]),e];return e.type==="checkbox"&&n.reverse(),n}async function C(t,e){return window[t]?window[t]:new Promise(n=>{document.head.appendChild(re({src:e,onload:()=>n(window[t])}))})}function _(t,e,n=void 0){return t.map(o=>o?e:n)}var x=!0,I=new Set,k=new Set,R=new Map;async function vn(){let t=await C("ForceGraph","https://unpkg.com/force-graph"),e,n,o=P(!1).named("minimized"),c=o.map(r=>r?"10":"70");document.body.appendChild(e=w({style:"position: fixed; top: 0; right: 0; z-index: 300; background: #eee; padding: 1em;"},[w({style:"position: relative;"},[n=w({style:c.map(r=>`height: ${r}vh; width: ${r}vw; overflow: auto`)}),F({style:"position: absolute; top: 0; left: 0; color: black",onclick:()=>e.remove()},["X"]),F({style:"position: absolute; top: 0; right: 0; color: black",onclick:()=>o.set(!o.value)},[_(o,"\u2199","\u2197")])])]));let s=[...I],l=s.map(r=>({id:r.id,ref:r,class:r.constructor.name,name:`${r.name??r.id} (${r.constructor.name}) = ${Array.isArray(r.value)?`${r.value.length} \u2715 ${r.value[0]?.constructor.name}`:r.value?.toString()}`,val:3})),d=l.map(({id:r,ref:{targets:a}})=>[...a].map(({id:i})=>({source:r,target:i}))).flat(),p=s.map(({watchers:r})=>[...r].map(a=>({id:g("watcher-"),watcher:a,class:"watcher",name:`${a.toString()}`}))).flat(),T=new Map(p.map(({watcher:r,id:a})=>[r,a])),f=s.map(({id:r,watchers:a})=>[...a].map(i=>({source:r,target:T.get(i)??ee(`Watcher ${i} has no ID.`)})).flat()).flat();function z(r){return{id:g("el-"),element:r,class:r.constructor.name,name:`${r.tagName}#${r.id||""}.${r.className}`,val:r.querySelectorAll("*").length}}let S=[...k].map(z),ae=new Map,D=r=>{let a=(S.find(({element:i})=>i===r)??(()=>{let i=z(r);return S.push(i),i})()).id;return b(ae,r,a)},B=[...[...R].map(([{id:r},a])=>[...a].map(i=>({source:r,target:D(i)}))).flat(),...[...k].map(r=>[...r.children].filter(i=>i instanceof HTMLElement).map(i=>({source:D(r),target:D(i)}))).flat()],ie=[...l,...S,...p],se=[...d,...B,...f],le={nodes:ie,links:se},ue=r=>"#"+(r*1234567%Math.pow(2,24)).toString(16).padStart(6,"0"),ce=0,de=new Map,pe=r=>ue(b(de,r,++ce));new t(n).graphData(le).onNodeClick(({ref:r,element:a})=>{console.log(...r?[r,r._value]:[a]),h(window,{$:r??a})}).nodeAutoColorBy("class").nodeCanvasObjectMode(({ref:r,element:a})=>r?"after":a&&"replace").nodeCanvasObject(({ref:r,element:a,x:i,y:A,val:fe},m)=>{r?.name&&i&&A&&(m.font="10px Arial",m.fillText(r.name,i+10,A)),a&&i&&A&&(m.beginPath(),m.arc(i,A,Math.sqrt(Number(fe)+1),0,2*Math.PI,!1),m.fillStyle="white",m.fill(),m.lineWidth=2,m.strokeStyle=pe(a.tagName),m.stroke())}).linkLineDash(({target:r})=>typeof r=="object"&&r.element?[4,2]:null).linkDirectionalParticles(1);let Y={refNodes:l,elementNodes:S,refLinks:d,watcherLinks:f,elementLinks:B};h(window.smork,Y),console.log(Y)}Object.assign(window,{smork:{devTools:vn,allRefs:I,allElements:k,refToElementLinks:R}});var W=class extends Error{constructor(e){super(`smork: ${e}`)}};function Rn(t){return t&&typeof t=="object"&&O(t).every(e=>e instanceof u)}function P(t,e){return L(t)?q(t,e):Rn(t)?new y(()=>U(t,H),O(t)):new v(t)}var wn=Symbol("NotApplicable"),u=class{constructor(e){this._value=e;x&&I.add(this)}watchers=new Set;activeWatchers=new WeakSet;targets=new Set;id=g("ref-");name=void 0;named(e){return Z(this,{name:e})}get(){return $?.(this),this._value}_set(e){let{_value:n}=this;if(e!==n){this._value=e,this.tarnishTargets();try{for(let o of this.watchers)this.activeWatchers.has(o)&&console.warn("smork: watcher is already active \u2014 perhaps a circular dependency \u2014 exiting watch to prevent infinite loop"),this.activeWatchers.add(o),o(e,n)}finally{this.activeWatchers=new WeakSet}}}tarnishTargets(){this.targets.forEach(e=>e.tarnish())}watchImmediate(e){e(this.value,wn),this.watch(e)}watch(e){this.watchers.add(e)}unwatch(e){this.watchers.delete(e)}get value(){return this.get()}map(e){let n=new N(this,e);return L(n.value)?(this.targets.delete(n),n.sources.clear(),(...o)=>new N(this,c=>e(c)(...o))):n}mapDefined(e){return this.map(n=>n!==void 0?e(n):void 0)}uses(e){return Q(this,U(e,this.map))}setter(e=n=>this._set(n)){return new E(this,e)}},$,y=class extends u{constructor(n,o=void 0){super(void 0);this.getter=n;this.sources=new Set(o),(this.sourcesPredefined=!!o)&&o.forEach(c=>c.targets.add(this))}sources;sourcesPredefined=!1;dirty=!0;tarnish(){this.dirty||(this.dirty=!0,this.watchers.size?this.recalculate():this.tarnishTargets())}get(){return this.dirty&&this.recalculate(),super.get()}recalculate(){if(this.sourcesPredefined)return this.update();if($)throw new W("Tried to compute a ref while another one is already being computed \u2014 did you nest a computed ref in another ref's getter function?");this.sources.forEach(n=>n.targets.delete(this)),this.sources.clear();try{$=n=>{this.sources.add(n),n.targets.add(this)},this.update()}finally{$=void 0}}update=()=>{this._set(this.getter()),this.dirty=!1}};function q(t,e){return K(new y(t),n=>e?n.setter(e):n)}var N=class extends y{constructor(n,o){super(()=>o(n.value),[n]);this.source=n}},v=class extends u{set(e){this._set(e)}set value(e){this.set(e)}get value(){return this.get()}bridge(e,n){return this.map(e).setter(o=>this.set(n(o)))}clone(){return new V(this)}},V=class extends N{constructor(n){super(n,X);this.source=n}},E=class extends v{constructor(n,o,c=!1){super(n.value);this.source=n;this.allowMismatch=c;super.watch(kn(this))}set(n){if(super.set(n),!this.allowMismatch&&this.value!==n)throw new W("Setter did not update the value. If you want to allow this, set the allowMismatch property to true.")}};function kn(t){return e=>{t.set(e)}}function H(t){return t instanceof u?t.value:t}function oe(t){return t instanceof u?t:new u(t)}h(window,{ref:P,computed:q,Ref:u,WritableRef:v,ComputedRef:y,SetterRef:E,...j});})();
}}).main();

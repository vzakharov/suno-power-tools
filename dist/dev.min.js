(vovas = { main() {
(()=>{var W=Object.defineProperty;var _=(t,e)=>{for(var o in e)W(t,o,{get:e[o],enumerable:!0})};var q=0;function E(t=""){return`${t}${++q}`}function b(t,e){return Object.fromEntries(Object.entries(t).map(([o,r])=>[o,e(r,o)]))}function A(t,e){return b(t,e)}function h(t){return typeof t=="function"}function N(t,e){return Object.assign(t,e)}var x=class extends Error{constructor(e){super(`smork: ${e}`)}};function K(t,e){return h(t)?T(t,e):new u(t)}var i=class{constructor(e){this._value=e}watchers=new Set;activeWatchers=new WeakSet;get(){return m?.(this),this._value}_set(e){let{_value:o}=this;if(e!==this._value){this._value=e;try{for(let r of this.watchers){if(this.activeWatchers.has(r)){console.warn("smork: watcher is already active \u2014 perhaps a circular dependency \u2014 exiting watch to prevent infinite loop");return}this.activeWatchers.add(r),r(e,o)}}finally{this.activeWatchers=new WeakSet}}}runAndWatch(e){e(this._value,this._value),this.watch(e)}watchImmediate=this.runAndWatch;watch(e){this.watchers.add(e)}onChange=this.watch;unwatch(e){this.watchers.delete(e)}get value(){return this.get()}map(e){let o=new g(this,e);return h(o.value)?(this.unwatch(o.update),(...r)=>new g(this,a=>e(a)(...r))):o}merge(e){return e?T(()=>({...this.value,...R(e)})):this}uses(e){return N(this,b(e,this.map))}onceDefined(e){let o=r=>{r&&(this.unwatch(o),e(r))};this.watchImmediate(o)}},g=class extends i{constructor(o,r){var e=(...G)=>(super(...G),this.dependency=o,this.mapper=r,this);o&&(e(r(o.value)),o.watch(this.update))}update=o=>this._set(this.mapper(o))},u=class extends i{set(e){this._set(e)}set value(e){this.set(e)}get value(){return this.get()}bridge(e,o){return new c(()=>e(this.value),r=>this.set(o(r)))}};var m,f=class extends u{constructor(o){super(void 0);this.getter=o;this.track()}dependencies=new Set;track=()=>{if(m)throw new x("Tried to compute a ref while another one is already being computed \u2014 did you nest a computed ref in another ref's getter function?");this.dependencies.forEach(o=>o.unwatch(this.track)),this.dependencies=new Set;try{m=o=>{o.watch(this.track),this.dependencies.add(o)},this._set(this.getter())}finally{m=void 0}}},c=class extends u{constructor(o,r,a=!1){let n=new f(o);super(n.value);this.setter=r;this.allowMismatch=a;n.watch(p=>this._set(p))}set(o){if(this.setter(o),!this.allowMismatch&&this.value!==o)throw new x("Setter did not update the value. If you want to allow this, set the allowMismatch property to true.")}};function T(t,e){return e?new c(t,e):new f(t)}function S(t){return T(()=>!t.value)}function R(t){return t instanceof i?t.value:t}function U(t){return t instanceof i?t:new i(t)}function M(t,e){return e(t)}function F(t,e){Object.assign(t,e)}var k={};_(k,{Checkbox:()=>j,If:()=>z,Labeled:()=>C,TextInput:()=>V,importScript:()=>$,modelElement:()=>w,tag:()=>v});var P=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];var{a:oe,abbr:re,address:ne,area:ae,article:pe,aside:ie,audio:se,b:le,base:de,bdi:ue,bdo:fe,blockquote:ce,body:ye,br:Te,button:me,canvas:xe,caption:ge,cite:be,code:he,col:Re,colgroup:ve,data:we,datalist:ke,dd:Ee,del:Ae,details:Ne,dfn:Ke,dialog:Se,div:Ue,dl:Me,dt:Fe,em:Pe,embed:Ie,fieldset:We,figcaption:_e,figure:qe,footer:je,form:Ve,h1:Ce,h2:$e,h3:ze,h4:He,h5:Le,h6:Oe,head:De,header:Be,hgroup:Ye,hr:Ge,html:Je,i:Qe,iframe:Xe,img:Ze,input:et,ins:tt,kbd:ot,label:I,legend:rt,li:nt,link:at,main:pt,map:it,mark:st,menu:lt,meta:dt,meter:ut,nav:ft,noscript:ct,object:yt,ol:Tt,optgroup:mt,option:xt,output:gt,p:bt,picture:ht,pre:Rt,progress:vt,q:wt,rp:kt,rt:Et,ruby:At,s:Nt,samp:Kt,script:St,search:Ut,section:Mt,select:Ft,slot:Pt,small:It,source:Wt,span:_t,strong:qt,style:jt,sub:Vt,summary:Ct,sup:$t,table:zt,tbody:Ht,td:Lt,template:Ot,textarea:Dt,tfoot:Bt,th:Yt,thead:Gt,time:Jt,title:Qt,tr:Xt,track:Zt,u:eo,ul:to,var:oo,video:ro,wbr:no}=P.reduce((t,e)=>(t[e]=v(e),t),{});function v(t){function e(r,a){let[n,p]=Array.isArray(r)?[void 0,r]:[r,a];return o(n,p)}return e;function o(r,a){let n=document.createElement(t);return r&&A(r,(p,s)=>{typeof p=="function"?n[s==="style"?"cssText":s]=p():M(p,y=>{l(R(y)),U(y).watch(l);function l(d){typeof d=="boolean"?d?n.setAttribute(s,""):n.removeAttribute(s):n.setAttribute(s,String(d))}})}),a&&a.forEach(p=>{let s=void 0,y=l=>{let d=typeof l=="string"?document.createTextNode(l):l instanceof HTMLElement?l:document.createComment("");s?s.replaceWith(d):n.appendChild(d),s=d};p instanceof i?p.watchImmediate(y):y(p)}),n}}var j=w("input","checked",Boolean,{type:"checkbox"},t=>({onchange:()=>t.set(!t.value)})),V=w("input","value",String,{type:"text"},t=>({onkeyup:({key:e,target:o})=>{e==="Enter"&&o instanceof HTMLInputElement&&t.set(o.value)}}));function w(t,e,o,r){return(a,n)=>t(t)({...o,...n,[e]:a,...r(a)})}function C(t,e){e.id||=E("smork-input-");let o=[I({for:e.id},[t]),e];return e.type==="checkbox"&&o.reverse(),o}async function $(t,e,o){let r=t.document.createElement("script");return r.type="text/javascript",r.src=o,t.document.head.appendChild(r),new Promise(a=>{r.onload=()=>{a(t[e])}})}function z(t,e,o=void 0){return t.map(r=>r?e:o)}F(window,{ref:K,computed:T,useNot:S,Ref:i,WritableRef:u,ComputedRef:f,WritableComputedRef:c,...k});})();
}}).main();
